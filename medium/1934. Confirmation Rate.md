# 1934. Confirmation Rate

**Data:** 17/12/2025  
**Dificuldade:** Medium  
**Tópicos:** SQL, LEFT JOIN, GROUP BY, CASE  
**Link:** https://leetcode.com/problems/confirmation-rate/description/?envType=study-plan-v2&envId=top-sql-50

## Descrição
Escreva uma solução para encontrar a taxa de confirmação de cada usuário. A taxa de confirmação é o número de confirmações dividido pelo número total de solicitações de confirmação. Arredonde o valor para duas casas decimais. Se um usuário não tiver solicitações, a taxa deve ser 0.

## Solução (SQL Server)

```sql
WITH qwe AS (
    SELECT user_id,
           COUNT(*) total,
           SUM(CASE WHEN action = 'confirmed' THEN 1 ELSE 0 END) total_confirmado
    FROM confirmations
    GROUP BY user_id
)

SELECT s.user_id,
       ISNULL(ROUND(q.total_confirmado * 1.0 / NULLIF(q.total, 0), 2), 0) confirmation_rate
FROM Signups s
LEFT JOIN qwe q
    ON s.user_id = q.user_id
ORDER BY s.user_id;
