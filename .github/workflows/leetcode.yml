name: LeetCode Heatmap
on:
  schedule:
    - cron: '0 1 * * *'  # 1h depois do principal
  workflow_dispatch:

jobs:
  heatmap:
    runs-on: ubuntu-latest
    permissions:
      contents: write
      
    steps:
      - uses: actions/checkout@v3
      
      - name: Generate Custom Heatmap
        run: |
          # API que permite filtrar por data (usando leetcode.com)
          # Você precisará do seu cookie de sessão do LeetCode
          
          # Versão simplificada com seus dados de exemplo
          cat > heatmap.svg << 'EOF'
          <svg xmlns="http://www.w3.org/2000/svg" width="720" height="140" viewBox="0 0 720 140">
            <rect width="720" height="140" fill="#0d1117"/>
            
            <!-- Título -->
            <text x="20" y="30" fill="#c9d1d9" font-family="Arial" font-size="16">
              LeetCode Activity (Dec 2025 - Now)
            </text>
            
            <!-- Heatmap personalizado baseado nos seus dados -->
            <!-- Dezembro 2025 (semanas 49-52) -->
            <g transform="translate(20, 50)">
              <text y="-5" fill="#8b949e" font-size="10">Dec</text>
              <!-- Dias ativos: 10 total, vamos distribuir -->
              <rect x="0" width="10" height="10" fill="#0e4429" title="2025-12-01: 3 problems"/>
              <rect x="12" width="10" height="10" fill="#0e4429" title="2025-12-02: 4 problems"/>
              <rect x="24" width="10" height="10" fill="#196127" title="2025-12-03: 5 problems"/>
              <!-- Continue com os 10 dias ativos... -->
            </g>
            
            <!-- Janeiro 2026 -->
            <g transform="translate(120, 50)">
              <text y="-5" fill="#8b949e" font-size="10">Jan</text>
              <!-- Adicione conforme avança -->
            </g>
            
            <!-- Legenda -->
            <g transform="translate(20, 100)">
              <text fill="#c9d1d9" font-size="12">Less</text>
              <rect x="40" width="10" height="10" fill="#161b22"/>
              <rect x="55" width="10" height="10" fill="#0e4429"/>
              <rect x="70" width="10" height="10" fill="#196127"/>
              <rect x="85" width="10" height="10" fill="#26a641"/>
              <text x="100" fill="#c9d1d9" font-size="12">More</text>
            </g>
            
            <!-- Estatísticas -->
            <text x="20" y="130" fill="#8b949e" font-size="11">
              Total Active Days: 10 • Max Streak: 7 • Last Active: Today
            </text>
          </svg>
          EOF
          
      - name: Commit Heatmap
        run: |
          git config user.name "github-actions"
          git config user.email "actions@github.com"
          git add heatmap.svg
          git commit -m "Update LeetCode heatmap" || exit 0
          git push
